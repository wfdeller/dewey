# Dewey Backend Environment Configuration
# Copy this file to .env and fill in the values

# =============================================================================
# APPLICATION
# =============================================================================
APP_NAME=Dewey
DEBUG=true
ENVIRONMENT=development

# Security (generate with: openssl rand -hex 32)
# IMPORTANT: This key is used for JWT signing AND encrypting tenant AI keys
SECRET_KEY=your-secret-key-min-32-chars-long-here

# =============================================================================
# DATABASE
# =============================================================================
DATABASE_URL=postgresql://dewey:dewey@localhost:5432/dewey

# =============================================================================
# REDIS
# =============================================================================
REDIS_URL=redis://localhost:6379/0

# =============================================================================
# AI PROVIDERS (Platform Keys - for Free/Trial tier tenants only)
# =============================================================================
# These keys are used ONLY for tenants on the "platform" key source (Free/Trial).
# Pro/Enterprise tenants provide their own keys, stored encrypted per-tenant.
#
# For development, you can set one of these to test AI features.
# In production, consider whether to offer platform keys at all.

DEFAULT_AI_PROVIDER=claude

# Anthropic Claude (recommended)
ANTHROPIC_API_KEY=

# OpenAI
OPENAI_API_KEY=

# Azure OpenAI (for Azure-hosted OpenAI models)
AZURE_OPENAI_API_KEY=
AZURE_OPENAI_ENDPOINT=
AZURE_OPENAI_API_VERSION=2024-02-15-preview

# Ollama (self-hosted, no API key needed)
OLLAMA_BASE_URL=http://localhost:11434

# =============================================================================
# MICROSOFT 365 / AZURE AD INTEGRATION
# =============================================================================
# Required for O365 email intake and Azure AD SSO
# Register an app at https://portal.azure.com > App registrations
#
# App Registration Setup:
# 1. Go to Azure Portal > Azure Active Directory > App registrations > New registration
# 2. Name: "Dewey" (or your app name)
# 3. Supported account types: "Accounts in any organizational directory" (multi-tenant)
# 4. Redirect URI: Web - http://localhost:8000/api/v1/auth/azure/callback
# 5. After creation, go to "Certificates & secrets" > New client secret
# 6. Go to "API permissions" > Add: Microsoft Graph > Delegated > openid, profile, email, User.Read
#
# For production, add your production redirect URI to the app registration.

AZURE_CLIENT_ID=
AZURE_CLIENT_SECRET=
AZURE_TENANT_ID=common
AZURE_REDIRECT_URI=http://localhost:8000/api/v1/auth/azure/callback

# =============================================================================
# CORS
# =============================================================================
CORS_ORIGINS=["http://localhost:5173","http://localhost:3000"]

# =============================================================================
# LOGGING
# =============================================================================
LOG_LEVEL=INFO
LOG_JSON=false

# =============================================================================
# RATE LIMITING
# =============================================================================
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW_SECONDS=60
